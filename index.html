<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="version" content="8.0">
    <title>Gia phả cá nhân</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
<header>
    <div class="title">
        <h1 data-i18n="title">Gia phả cá nhân</h1>
        <span id="version" class="version"></span>
    </div>
    <select id="languageSelect">
        <option value="vi">Tiếng Việt</option>
        <option value="en">English</option>
    </select>
</header>
<nav id="mainNav">
    <button data-section="homeSection" data-i18n="home">Trang chủ</button>
    <button data-section="addMember" data-i18n="addMember">Thêm thành viên</button>
    <button data-section="treeSection" data-i18n="tree">Cây gia phả</button>
    <button data-section="statsSection" data-i18n="stats">Thống kê</button>
    <button data-section="shareSection" data-i18n="share">Chia sẻ</button>
    <button data-section="securitySection" data-i18n="security">Bảo mật</button>
</nav>
<section id="homeSection" class="panel">
    <h2 data-i18n="home">Trang chủ</h2>
    <p data-i18n="welcome">Chào mừng! Bắt đầu bằng cách thêm thành viên đầu tiên.</p>
</section>
<section id="addMember" class="panel">
    <h2 data-i18n="addMember">Thêm thành viên</h2>
    <form id="memberForm">
        <input type="hidden" id="memberId">
        <label for="name" data-i18n="name">Họ tên</label>
        <input type="text" id="name" required data-i18n-placeholder="namePlaceholder" placeholder="Họ tên">
        <label for="birth" data-i18n="birth">Ngày sinh</label>
        <input type="date" id="birth">
        <label for="fatherSelect" data-i18n="father">Cha</label>
        <select id="fatherSelect"><option value="" data-i18n="none">--</option></select>
        <label for="motherSelect" data-i18n="mother">Mẹ</label>
        <select id="motherSelect"><option value="" data-i18n="none">--</option></select>
        <label for="spouseSelect" data-i18n="spouse">Vợ/Chồng</label>
        <select id="spouseSelect"><option value="" data-i18n="none">--</option></select>
        <button type="button" id="newBtn" data-i18n="new">Thêm mới</button>
        <button type="submit" data-i18n="save">Lưu</button>
        <button type="button" id="deleteBtn" data-i18n="delete" disabled>Xóa</button>
        <button type="button" id="centerBtn" data-i18n="setCenter" disabled>Chọn làm trung tâm</button>
    </form>
</section>
<section id="treeSection" class="panel">
    <h2 data-i18n="tree">Cây gia phả</h2>
    <input type="text" id="searchInput" placeholder="Tìm kiếm..." data-i18n-placeholder="search">
    <div id="tree"></div>
</section>
<section id="statsSection" class="panel">
    <h2 data-i18n="stats">Thống kê</h2>
    <div id="stats"></div>
</section>
<section id="shareSection" class="panel">
    <h2 data-i18n="share">Chia sẻ</h2>
    <div class="export-group">
        <h3 data-i18n="exportData">Xuất dữ liệu</h3>
        <button id="exportBtn" data-i18n="export">Xuất JSON</button>
        <button id="exportEncryptedBtn" data-i18n="exportEncrypted">Xuất JSON mã hóa</button>
        <button id="exportCsvBtn" data-i18n="exportCsv">Xuất CSV</button>
        <button id="backupBtn" data-i18n="backup">Sao lưu toàn bộ</button>
    </div>
    <div class="import-group">
        <h3 data-i18n="importData">Nhập dữ liệu</h3>
        <label for="importInput" class="file-label" data-i18n="chooseFile">Chọn file để nhập</label>
        <input type="file" id="importInput" accept="application/json,.csv,.backup">
        <button id="restoreBtn" data-i18n="restore">Khôi phục từ sao lưu</button>
        <input type="file" id="restoreInput" accept=".backup" style="display:none;">
    </div>
    <div class="qr-group">
        <h3 data-i18n="qrCode">Mã QR</h3>
        <button id="qrBtn" data-i18n="qr">Tạo QR Code</button>
        <div id="qrContainer"></div>
    </div>
</section>
<section id="securitySection" class="panel">
    <h2 data-i18n="security">Bảo mật</h2>
    <div class="security-info">
        <p data-i18n="securityDesc">Dữ liệu của bạn được mã hóa AES-GCM 256-bit và lưu trữ an toàn trên trình duyệt.</p>
    </div>
    <div class="password-change">
        <h3 data-i18n="changePassword">Thay đổi mật khẩu</h3>
        <form id="passwordForm">
            <label for="currentPassword" data-i18n="currentPassword">Mật khẩu hiện tại</label>
            <input type="password" id="currentPassword" required>
            <label for="newPassword" data-i18n="newPassword">Mật khẩu mới</label>
            <input type="password" id="newPassword" required>
            <label for="confirmPassword" data-i18n="confirmPassword">Xác nhận mật khẩu mới</label>
            <input type="password" id="confirmPassword" required>
            <button type="submit" data-i18n="changePasswordBtn">Đổi mật khẩu</button>
        </form>
    </div>
    <div class="data-info">
        <h3 data-i18n="dataInfo">Thông tin dữ liệu</h3>
        <div id="dataStats"></div>
        <button id="clearDataBtn" class="btn-danger" data-i18n="clearData">Xóa toàn bộ dữ liệu</button>
    </div>
</section>
<div class="modal fade" id="actionModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" data-i18n="chooseAction">Chọn thao tác</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <button type="button" class="btn btn-primary w-100 mb-2" id="editBtn" data-i18n="edit">Sửa</button>
        <button
            type="button"
            class="btn btn-secondary w-100 mb-2"
            id="addChildBtn"
            data-i18n="addChild">Thêm con</button>
        <button
            type="button"
            class="btn btn-secondary w-100 mb-2"
            id="addSpouseBtn"
            data-i18n="addSpouse">Thêm vợ/chồng</button>
        <button
            type="button"
            class="btn btn-secondary w-100 mb-2"
            id="addFatherBtn"
            data-i18n="addFather">Thêm cha</button>
        <button
            type="button"
            class="btn btn-secondary w-100"
            id="addMotherBtn"
            data-i18n="addMother">Thêm mẹ</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="childModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" data-i18n="childAsk">Bạn là cha hay mẹ của người con?</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <button
            type="button"
            class="btn btn-primary w-100 mb-2"
            id="childAsFatherBtn"
            data-i18n="asFather">Tôi là cha</button>
        <button
            type="button"
            class="btn btn-secondary w-100"
            id="childAsMotherBtn"
            data-i18n="asMother">Tôi là mẹ</button>
      </div>
    </div>
  </div>
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="lib/qrcode.min.js"></script>
<script src="script.js"></script>
</body>
</html>

